<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS Architecture & Analytics | Enterprise</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/papaparse/5.3.2/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&family=Fraunces:opsz,wght@9..144,700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #0a0a0c;
            --card-bg: rgba(23, 23, 26, 0.7);
            --accent: #d4af37; /* AltÄ±n/Mimar dokunuÅŸu */
            --text-main: #e4e4e7;
        }
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--bg-color); 
            color: var(--text-main);
            background-image: radial-gradient(circle at 2px 2px, #1a1a1e 1px, transparent 0);
            background-size: 40px 40px;
        }
        .architect-title { font-family: 'Fraunces', serif; letter-spacing: -0.02em; }
        .glass-card { 
            background: var(--card-bg); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(255,255,255,0.08); 
            border-radius: 24px;
        }
        .accent-border { border-left: 4px solid var(--accent); }
        .gradient-text {
            background: linear-gradient(135deg, #fff 0%, #a1a1aa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .custom-shadow { shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); }
    </style>
</head>
<body class="min-h-screen p-4 md:p-10">

    <div class="max-w-7xl mx-auto">
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-16 gap-6">
            <div class="space-y-2">
                <span class="text-xs uppercase tracking-[0.3em] text-gray-500 font-bold">Data Architecture Unit</span>
                <h1 class="architect-title text-5xl md:text-6xl gradient-text">CS Intelligence Suite</h1>
                <p class="text-gray-400 font-light max-w-md">Binlerce satÄ±r veriyi, yapÄ±sal bir sanat eserine ve stratejik kararlara dÃ¶nÃ¼ÅŸtÃ¼ren analitik motor.</p>
            </div>
            
            <div class="relative group">
                <input type="file" id="fileInput" accept=".csv, .xlsx, .xls" class="hidden">
                <label for="fileInput" class="cursor-pointer flex items-center space-x-3 bg-white text-black px-8 py-4 rounded-2xl hover:bg-gray-200 transition-all duration-300 transform group-hover:-translate-y-1 shadow-2xl font-bold">
                    <span>ğŸ“‚ Veri KaynaÄŸÄ±nÄ± BaÄŸla (.xlsx / .csv)</span>
                </label>
            </div>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10" id="kpiGrid">
            <div class="glass-card p-8 accent-border">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-widest">Hacim Kapasitesi</p>
                <h3 id="totalHandled" class="text-4xl font-extrabold mt-3 italic">0</h3>
                <p class="text-xs text-gray-600 mt-2">Toplam Ä°ÅŸlenen Request</p>
            </div>
            <div class="glass-card p-8 accent-border">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-widest">YanÄ±t Statikleri</p>
                <h3 id="avgResponse" class="text-4xl font-extrabold mt-3 italic">0<span class="text-lg">s</span></h3>
                <p class="text-xs text-gray-600 mt-2">Ortalama YanÄ±t Gecikmesi</p>
            </div>
            <div class="glass-card p-8 accent-border border-red-900/50">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-widest">Sistem KaÃ§aklarÄ±</p>
                <h3 id="lostCalls" class="text-4xl font-extrabold mt-3 text-red-500 italic">0</h3>
                <p class="text-xs text-gray-600 mt-2">Auto-Close / KayÄ±p MÃ¼ÅŸteri</p>
            </div>
            <div class="glass-card p-8 accent-border border-amber-500/50">
                <p class="text-xs text-gray-500 uppercase font-bold tracking-widest">YapÄ±sal SaÄŸlÄ±k</p>
                <h3 id="resRate" class="text-4xl font-extrabold mt-3 text-amber-500 italic">%0</h3>
                <p class="text-xs text-gray-600 mt-2">Verimlilik KatsayÄ±sÄ±</p>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-10">
            <div class="lg:col-span-2 glass-card p-10 overflow-hidden">
                <div class="flex justify-between items-center mb-8">
                    <h4 class="text-xl font-bold italic">Operasyonel YÃ¼k DaÄŸÄ±lÄ±mÄ±</h4>
                    <div class="h-1 w-20 bg-gray-800 rounded-full"></div>
                </div>
                <div class="h-[400px]">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>

            <div class="flex flex-col gap-6">
                <div class="glass-card p-8 flex-1 bg-gradient-to-br from-[#17171a] to-[#0a0a0c]">
                    <h5 class="text-blue-400 font-extrabold text-sm uppercase tracking-tighter mb-4 flex items-center">
                        <span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span> System Kernel Review
                    </h5>
                    <p id="devNote" class="text-sm text-gray-400 leading-relaxed font-mono">
                        Girdi bekleniyor... Veri setini yÃ¼klediÄŸinizde, 500 yÄ±llÄ±k yazÄ±lÄ±m tecrÃ¼bemle kod tabanÄ±ndaki anomalileri raporlayacaÄŸÄ±m.
                    </p>
                </div>
                <div class="glass-card p-8 flex-1 border border-amber-900/20">
                    <h5 class="text-amber-500 font-extrabold text-sm uppercase tracking-tighter mb-4 flex items-center">
                        <span class="w-2 h-2 bg-amber-500 rounded-full mr-2"></span> Architectural Integrity
                    </h5>
                    <p id="archNote" class="text-sm text-gray-400 leading-relaxed italic">
                        HenÃ¼z bir yapÄ± inÅŸa edilmedi. Verileriniz geldiÄŸinde, ekibinizin kurduÄŸu bu dijital binanÄ±n sarsÄ±lmazlÄ±ÄŸÄ±nÄ± analiz edeceÄŸim.
                    </p>
                </div>
            </div>
        </div>

        <footer class="text-center text-gray-600 text-[10px] uppercase tracking-[0.5em] py-10">
            Legacy Excellence &bull; Software Engineering &bull; Architectural Design
        </footer>
    </div>

    <script>
        let myChart;

        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();

            if (file.name.endsWith('.csv')) {
                Papa.parse(file, {
                    header: true,
                    dynamicTyping: true,
                    complete: function(results) { processData(results.data); }
                });
            } else {
                reader.onload = function(evt) {
                    const data = new Uint8Array(evt.target.result);
                    const workbook = XLSX.read(data, {type: 'array'});
                    const sheetName = workbook.SheetNames[0];
                    const json = XLSX.utils.sheet_to_json(workbook.Sheets[sheetName]);
                    processData(json);
                };
                reader.readAsArrayBuffer(file);
            }
        });

        function processData(rawData) {
            // Veri temizleme
            const data = rawData.filter(d => d.å®¢æœæ˜µç§° && d.å®¢æœæ˜µç§° !== "");

            const stats = {
                total: data.reduce((a, b) => a + (Number(b.å®¢æœå¤„ç†é‡) || 0), 0),
                avgRes: data.reduce((a, b) => a + (Number(b.å®¢æœå¹³å‡å“åº”æ—¶é•¿) || 0), 0) / data.length,
                lost: data.reduce((a, b) => a + (Number(b.è‡ªåŠ¨å…³é—­é‡) || 0), 0),
                csMap: {}
            };

            // CS bazlÄ± gruplama
            data.forEach(d => {
                if(!stats.csMap[d.å®¢æœæ˜µç§°]) stats.csMap[d.å®¢æœæ˜µç§°] = 0;
                stats.csMap[d.å®¢æœæ˜µç§°] += (Number(d.å®¢æœå¤„ç†é‡) || 0);
            });

            updateUI(stats);
            renderChart(stats.csMap);
            generateInsights(stats);
        }

        function updateUI(s) {
            document.getElementById('totalHandled').innerText = s.total.toLocaleString();
            document.getElementById('avgResponse').innerHTML = `${Math.round(s.avgRes)}<span class="text-lg">s</span>`;
            document.getElementById('lostCalls').innerText = s.lost.toLocaleString();
            const rate = s.total > 0 ? ((s.total - s.lost) / s.total * 100).toFixed(1) : 0;
            document.getElementById('resRate').innerText = `%${rate}`;
        }

        function renderChart(csData) {
            const ctx = document.getElementById('mainChart').getContext('2d');
            if(myChart) myChart.destroy();

            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: Object.keys(csData),
                    datasets: [{
                        label: 'Ä°ÅŸlem Hacmi',
                        data: Object.values(csData),
                        backgroundColor: '#ffffff',
                        hoverBackgroundColor: '#d4af37',
                        borderRadius: 12,
                        barThickness: 40
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { grid: { color: '#1a1a1e' }, border: { display: false }, ticks: { color: '#666' } },
                        x: { grid: { display: false }, ticks: { color: '#fff', font: { weight: 'bold' } } }
                    }
                }
            });
        }

        function generateInsights(s) {
            const lossRate = (s.lost / s.total * 100).toFixed(1);
            document.getElementById('devNote').innerText = `[LOG] Thread Analysis Complete: Toplam ${s.total} paket iÅŸlendi. Ortalama bekleme sÃ¼resi ${Math.round(s.avgRes)}ms. Stack Trace incelemesinde veri kaybÄ± oranÄ± (lost packets) %${lossRate} olarak saptandÄ±. Sistem darboÄŸazÄ± (bottleneck) tespiti iÃ§in personel eÅŸitleme algoritmasÄ± Ã¶neriliyor.`;
            
            document.getElementById('archNote').innerText = `Rapor: Ä°nÅŸa ettiÄŸiniz bu operasyonel binada, ${s.lost} mÃ¼ÅŸterinin kapÄ±dan girmeden dÃ¶nmesi, 'giriÅŸ holÃ¼' tasarÄ±mÄ±ndaki (ilk karÅŸÄ±lama hÄ±zÄ±) eksikliÄŸi gÃ¶sterir. %${lossRate} oranÄ±ndaki bu yapÄ±sal Ã§atlak, zamanla binanÄ±n temeline zarar verebilir. AltÄ±n oranÄ± yakalamak iÃ§in hÄ±z ve Ã§Ã¶zÃ¼m dengesi kurulmalÄ±.`;
        }
    </script>
</body>
</html>
